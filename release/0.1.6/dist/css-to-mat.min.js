/*
Copyright (c) 2019 Daybrush
name: css-to-mat
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/css-to-mat.git
version: 0.1.6
*/
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(t=t||self).CssToMatrix=a()}(this,function(){"use strict";var j=1e-6,b="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI;function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],u=a[4],i=a[5],s=a[6],f=a[7],h=a[8],M=a[9],c=a[10],l=a[11],v=a[12],m=a[13],p=a[14],b=a[15],d=r*i-n*u,y=r*s-e*u,x=r*f-o*u,g=n*s-e*i,F=n*f-o*i,w=e*f-o*s,A=h*m-M*v,q=h*p-c*v,S=h*b-l*v,R=M*p-c*m,E=M*b-l*m,T=c*b-l*p,D=d*T-y*E+x*R+g*S-F*q+w*A;return D?(D=1/D,t[0]=(i*T-s*E+f*R)*D,t[1]=(e*E-n*T-o*R)*D,t[2]=(m*w-p*F+b*g)*D,t[3]=(c*F-M*w-l*g)*D,t[4]=(s*S-u*T-f*q)*D,t[5]=(r*T-e*S+o*q)*D,t[6]=(p*x-v*w-b*y)*D,t[7]=(h*w-c*x+l*y)*D,t[8]=(u*E-i*S+f*A)*D,t[9]=(n*S-r*E-o*A)*D,t[10]=(v*F-m*x+b*d)*D,t[11]=(M*x-h*F-l*d)*D,t[12]=(i*q-u*R-s*A)*D,t[13]=(r*R-n*q+e*A)*D,t[14]=(m*y-v*g-p*d)*D,t[15]=(h*g-M*y+c*d)*D,t):null}function o(t,a,r){var n=a[0],e=a[1],o=a[2],u=a[3],i=a[4],s=a[5],f=a[6],h=a[7],M=a[8],c=a[9],l=a[10],v=a[11],m=a[12],p=a[13],b=a[14],d=a[15],y=r[0],x=r[1],g=r[2],F=r[3];return t[0]=y*n+x*i+g*M+F*m,t[1]=y*e+x*s+g*c+F*p,t[2]=y*o+x*f+g*l+F*b,t[3]=y*u+x*h+g*v+F*d,y=r[4],x=r[5],g=r[6],F=r[7],t[4]=y*n+x*i+g*M+F*m,t[5]=y*e+x*s+g*c+F*p,t[6]=y*o+x*f+g*l+F*b,t[7]=y*u+x*h+g*v+F*d,y=r[8],x=r[9],g=r[10],F=r[11],t[8]=y*n+x*i+g*M+F*m,t[9]=y*e+x*s+g*c+F*p,t[10]=y*o+x*f+g*l+F*b,t[11]=y*u+x*h+g*v+F*d,y=r[12],x=r[13],g=r[14],F=r[15],t[12]=y*n+x*i+g*M+F*m,t[13]=y*e+x*s+g*c+F*p,t[14]=y*o+x*f+g*l+F*b,t[15]=y*u+x*h+g*v+F*d,t}function c(t,a,r){var n=a[0],e=a[1],o=a[2],u=a[3],i=n+n,s=e+e,f=o+o,h=n*i,M=n*s,c=n*f,l=e*s,v=e*f,m=o*f,p=u*i,b=u*s,d=u*f;return t[0]=1-(l+m),t[1]=M+d,t[2]=c-b,t[3]=0,t[4]=M-d,t[5]=1-(h+m),t[6]=v+p,t[7]=0,t[8]=c+b,t[9]=v-p,t[10]=1-(h+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function d(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],u=a[5],i=a[6],s=a[8],f=a[9],h=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,u,i),t[2]=Math.hypot(s,f,h),t}function t(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}Math.hypot||(Math.hypot=function(){for(var t=0,a=arguments.length;a--;)t+=arguments[a]*arguments[a];return Math.sqrt(t)});var u={create:function(){var t=new b(16);return b!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var a=new b(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},fromValues:function(t,a,r,n,e,o,u,i,s,f,h,M,c,l,v,m){var p=new b(16);return p[0]=t,p[1]=a,p[2]=r,p[3]=n,p[4]=e,p[5]=o,p[6]=u,p[7]=i,p[8]=s,p[9]=f,p[10]=h,p[11]=M,p[12]=c,p[13]=l,p[14]=v,p[15]=m,p},set:function(t,a,r,n,e,o,u,i,s,f,h,M,c,l,v,m,p){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=u,t[6]=i,t[7]=s,t[8]=f,t[9]=h,t[10]=M,t[11]=c,t[12]=l,t[13]=v,t[14]=m,t[15]=p,t},identity:w,transpose:function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],u=a[7],i=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=u,t[14]=i}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},invert:e,adjoint:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],u=a[4],i=a[5],s=a[6],f=a[7],h=a[8],M=a[9],c=a[10],l=a[11],v=a[12],m=a[13],p=a[14],b=a[15];return t[0]=i*(c*b-l*p)-M*(s*b-f*p)+m*(s*l-f*c),t[1]=-(n*(c*b-l*p)-M*(e*b-o*p)+m*(e*l-o*c)),t[2]=n*(s*b-f*p)-i*(e*b-o*p)+m*(e*f-o*s),t[3]=-(n*(s*l-f*c)-i*(e*l-o*c)+M*(e*f-o*s)),t[4]=-(u*(c*b-l*p)-h*(s*b-f*p)+v*(s*l-f*c)),t[5]=r*(c*b-l*p)-h*(e*b-o*p)+v*(e*l-o*c),t[6]=-(r*(s*b-f*p)-u*(e*b-o*p)+v*(e*f-o*s)),t[7]=r*(s*l-f*c)-u*(e*l-o*c)+h*(e*f-o*s),t[8]=u*(M*b-l*m)-h*(i*b-f*m)+v*(i*l-f*M),t[9]=-(r*(M*b-l*m)-h*(n*b-o*m)+v*(n*l-o*M)),t[10]=r*(i*b-f*m)-u*(n*b-o*m)+v*(n*f-o*i),t[11]=-(r*(i*l-f*M)-u*(n*l-o*M)+h*(n*f-o*i)),t[12]=-(u*(M*p-c*m)-h*(i*p-s*m)+v*(i*c-s*M)),t[13]=r*(M*p-c*m)-h*(n*p-e*m)+v*(n*c-e*M),t[14]=-(r*(i*p-s*m)-u*(n*p-e*m)+v*(n*s-e*i)),t[15]=r*(i*c-s*M)-u*(n*c-e*M)+h*(n*s-e*i),t},determinant:function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],u=t[5],i=t[6],s=t[7],f=t[8],h=t[9],M=t[10],c=t[11],l=t[12],v=t[13],m=t[14],p=t[15];return(a*u-r*o)*(M*p-c*m)-(a*i-n*o)*(h*p-c*v)+(a*s-e*o)*(h*m-M*v)+(r*i-n*u)*(f*p-c*l)-(r*s-e*u)*(f*m-M*l)+(n*s-e*i)*(f*v-h*l)},multiply:o,translate:function(t,a,r){var n,e,o,u,i,s,f,h,M,c,l,v,m=r[0],p=r[1],b=r[2];return a===t?(t[12]=a[0]*m+a[4]*p+a[8]*b+a[12],t[13]=a[1]*m+a[5]*p+a[9]*b+a[13],t[14]=a[2]*m+a[6]*p+a[10]*b+a[14],t[15]=a[3]*m+a[7]*p+a[11]*b+a[15]):(n=a[0],e=a[1],o=a[2],u=a[3],i=a[4],s=a[5],f=a[6],h=a[7],M=a[8],c=a[9],l=a[10],v=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=u,t[4]=i,t[5]=s,t[6]=f,t[7]=h,t[8]=M,t[9]=c,t[10]=l,t[11]=v,t[12]=n*m+i*p+M*b+a[12],t[13]=e*m+s*p+c*b+a[13],t[14]=o*m+f*p+l*b+a[14],t[15]=u*m+h*p+v*b+a[15]),t},scale:function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},rotate:function(t,a,r,n){var e,o,u,i,s,f,h,M,c,l,v,m,p,b,d,y,x,g,F,w,A,q,S,R,E=n[0],T=n[1],D=n[2],I=Math.hypot(E,T,D);return I<j?null:(E*=I=1/I,T*=I,D*=I,e=Math.sin(r),u=1-(o=Math.cos(r)),i=a[0],s=a[1],f=a[2],h=a[3],M=a[4],c=a[5],l=a[6],v=a[7],m=a[8],p=a[9],b=a[10],d=a[11],y=E*E*u+o,x=T*E*u+D*e,g=D*E*u-T*e,F=E*T*u-D*e,w=T*T*u+o,A=D*T*u+E*e,q=E*D*u+T*e,S=T*D*u-E*e,R=D*D*u+o,t[0]=i*y+M*x+m*g,t[1]=s*y+c*x+p*g,t[2]=f*y+l*x+b*g,t[3]=h*y+v*x+d*g,t[4]=i*F+M*w+m*A,t[5]=s*F+c*w+p*A,t[6]=f*F+l*w+b*A,t[7]=h*F+v*w+d*A,t[8]=i*q+M*S+m*R,t[9]=s*q+c*S+p*R,t[10]=f*q+l*S+b*R,t[11]=h*q+v*S+d*R,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},rotateX:function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],u=a[5],i=a[6],s=a[7],f=a[8],h=a[9],M=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+f*n,t[5]=u*e+h*n,t[6]=i*e+M*n,t[7]=s*e+c*n,t[8]=f*e-o*n,t[9]=h*e-u*n,t[10]=M*e-i*n,t[11]=c*e-s*n,t},rotateY:function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],u=a[1],i=a[2],s=a[3],f=a[8],h=a[9],M=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-f*n,t[1]=u*e-h*n,t[2]=i*e-M*n,t[3]=s*e-c*n,t[8]=o*n+f*e,t[9]=u*n+h*e,t[10]=i*n+M*e,t[11]=s*n+c*e,t},rotateZ:function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],u=a[1],i=a[2],s=a[3],f=a[4],h=a[5],M=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+f*n,t[1]=u*e+h*n,t[2]=i*e+M*n,t[3]=s*e+c*n,t[4]=f*e-o*n,t[5]=h*e-u*n,t[6]=M*e-i*n,t[7]=c*e-s*n,t},fromTranslation:function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},fromScaling:function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,a,r){var n,e,o,u=r[0],i=r[1],s=r[2],f=Math.hypot(u,i,s);return f<j?null:(u*=f=1/f,i*=f,s*=f,n=Math.sin(a),o=1-(e=Math.cos(a)),t[0]=u*u*o+e,t[1]=i*u*o+s*n,t[2]=s*u*o-i*n,t[3]=0,t[4]=u*i*o-s*n,t[5]=i*i*o+e,t[6]=s*i*o+u*n,t[7]=0,t[8]=u*s*o+i*n,t[9]=i*s*o-u*n,t[10]=s*s*o+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:c,fromQuat2:function(t,a){var r=new b(3),n=-a[0],e=-a[1],o=-a[2],u=a[3],i=a[4],s=a[5],f=a[6],h=a[7],M=n*n+e*e+o*o+u*u;return 0<M?(r[0]=2*(i*u+h*n+s*o-f*e)/M,r[1]=2*(s*u+h*e+f*n-i*o)/M,r[2]=2*(f*u+h*o+i*e-s*n)/M):(r[0]=2*(i*u+h*n+s*o-f*e),r[1]=2*(s*u+h*e+f*n-i*o),r[2]=2*(f*u+h*o+i*e-s*n)),c(t,a,r),t},getTranslation:function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},getScaling:d,getRotation:function(t,a){var r=new b(3);d(r,a);var n=1/r[0],e=1/r[1],o=1/r[2],u=a[0]*n,i=a[1]*e,s=a[2]*o,f=a[4]*n,h=a[5]*e,M=a[6]*o,c=a[8]*n,l=a[9]*e,v=a[10]*o,m=u+h+v,p=0;return 0<m?(p=2*Math.sqrt(1+m),t[3]=.25*p,t[0]=(M-l)/p,t[1]=(c-s)/p,t[2]=(i-f)/p):h<u&&v<u?(p=2*Math.sqrt(1+u-h-v),t[3]=(M-l)/p,t[0]=.25*p,t[1]=(i+f)/p,t[2]=(c+s)/p):v<h?(p=2*Math.sqrt(1+h-u-v),t[3]=(c-s)/p,t[0]=(i+f)/p,t[1]=.25*p,t[2]=(M+l)/p):(p=2*Math.sqrt(1+v-u-h),t[3]=(i-f)/p,t[0]=(c+s)/p,t[1]=(M+l)/p,t[2]=.25*p),t},fromRotationTranslationScale:function(t,a,r,n){var e=a[0],o=a[1],u=a[2],i=a[3],s=e+e,f=o+o,h=u+u,M=e*s,c=e*f,l=e*h,v=o*f,m=o*h,p=u*h,b=i*s,d=i*f,y=i*h,x=n[0],g=n[1],F=n[2];return t[0]=(1-(v+p))*x,t[1]=(c+y)*x,t[2]=(l-d)*x,t[3]=0,t[4]=(c-y)*g,t[5]=(1-(M+p))*g,t[6]=(m+b)*g,t[7]=0,t[8]=(l+d)*F,t[9]=(m-b)*F,t[10]=(1-(M+v))*F,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,a,r,n,e){var o=a[0],u=a[1],i=a[2],s=a[3],f=o+o,h=u+u,M=i+i,c=o*f,l=o*h,v=o*M,m=u*h,p=u*M,b=i*M,d=s*f,y=s*h,x=s*M,g=n[0],F=n[1],w=n[2],A=e[0],q=e[1],S=e[2],R=(1-(m+b))*g,E=(l+x)*g,T=(v-y)*g,D=(l-x)*F,I=(1-(c+b))*F,P=(p+d)*F,Z=(v+y)*w,j=(p-d)*w,X=(1-(c+m))*w;return t[0]=R,t[1]=E,t[2]=T,t[3]=0,t[4]=D,t[5]=I,t[6]=P,t[7]=0,t[8]=Z,t[9]=j,t[10]=X,t[11]=0,t[12]=r[0]+A-(R*A+D*q+Z*S),t[13]=r[1]+q-(E*A+I*q+j*S),t[14]=r[2]+S-(T*A+P*q+X*S),t[15]=1,t},fromQuat:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],u=r+r,i=n+n,s=e+e,f=r*u,h=n*u,M=n*i,c=e*u,l=e*i,v=e*s,m=o*u,p=o*i,b=o*s;return t[0]=1-M-v,t[1]=h+b,t[2]=c-p,t[3]=0,t[4]=h-b,t[5]=1-f-v,t[6]=l+m,t[7]=0,t[8]=c+p,t[9]=l-m,t[10]=1-f-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,a,r,n,e,o,u){var i=1/(r-a),s=1/(e-n),f=1/(o-u);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+a)*i,t[9]=(e+n)*s,t[10]=(u+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*f,t[15]=0,t},perspective:function(t,a,r,n,e){var o,u=1/Math.tan(a/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t},perspectiveFromFieldOfView:function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),u=Math.tan(a.leftDegrees*Math.PI/180),i=Math.tan(a.rightDegrees*Math.PI/180),s=2/(u+i),f=2/(e+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(u-i)*s*.5,t[9]=(e-o)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},ortho:function(t,a,r,n,e,o,u){var i=1/(a-r),s=1/(n-e),f=1/(o-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(a+r)*i,t[13]=(e+n)*s,t[14]=(u+o)*f,t[15]=1,t},lookAt:function(t,a,r,n){var e,o,u,i,s,f,h,M,c,l,v=a[0],m=a[1],p=a[2],b=n[0],d=n[1],y=n[2],x=r[0],g=r[1],F=r[2];return Math.abs(v-x)<j&&Math.abs(m-g)<j&&Math.abs(p-F)<j?w(t):(h=v-x,M=m-g,c=p-F,e=d*(c*=l=1/Math.hypot(h,M,c))-y*(M*=l),o=y*(h*=l)-b*c,u=b*M-d*h,(l=Math.hypot(e,o,u))?(e*=l=1/l,o*=l,u*=l):u=o=e=0,i=M*u-c*o,s=c*e-h*u,f=h*o-M*e,(l=Math.hypot(i,s,f))?(i*=l=1/l,s*=l,f*=l):f=s=i=0,t[0]=e,t[1]=i,t[2]=h,t[3]=0,t[4]=o,t[5]=s,t[6]=M,t[7]=0,t[8]=u,t[9]=f,t[10]=c,t[11]=0,t[12]=-(e*v+o*m+u*p),t[13]=-(i*v+s*m+f*p),t[14]=-(h*v+M*m+c*p),t[15]=1,t)},targetTo:function(t,a,r,n){var e=a[0],o=a[1],u=a[2],i=n[0],s=n[1],f=n[2],h=e-r[0],M=o-r[1],c=u-r[2],l=h*h+M*M+c*c;0<l&&(h*=l=1/Math.sqrt(l),M*=l,c*=l);var v=s*c-f*M,m=f*h-i*c,p=i*M-s*h;return 0<(l=v*v+m*m+p*p)&&(v*=l=1/Math.sqrt(l),m*=l,p*=l),t[0]=v,t[1]=m,t[2]=p,t[3]=0,t[4]=M*p-c*m,t[5]=c*v-h*p,t[6]=h*m-M*v,t[7]=0,t[8]=h,t[9]=M,t[10]=c,t[11]=0,t[12]=e,t[13]=o,t[14]=u,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},subtract:t,multiplyScalar:function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},multiplyScalarAndAdd:function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t},exactEquals:function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},equals:function(t,a){var r=t[0],n=t[1],e=t[2],o=t[3],u=t[4],i=t[5],s=t[6],f=t[7],h=t[8],M=t[9],c=t[10],l=t[11],v=t[12],m=t[13],p=t[14],b=t[15],d=a[0],y=a[1],x=a[2],g=a[3],F=a[4],w=a[5],A=a[6],q=a[7],S=a[8],R=a[9],E=a[10],T=a[11],D=a[12],I=a[13],P=a[14],Z=a[15];return Math.abs(r-d)<=j*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-y)<=j*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(e-x)<=j*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-g)<=j*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-F)<=j*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(i-w)<=j*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-A)<=j*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(f-q)<=j*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(h-S)<=j*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(M-R)<=j*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(c-E)<=j*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-T)<=j*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-D)<=j*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(m-I)<=j*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(p-P)<=j*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(b-Z)<=j*Math.max(1,Math.abs(b),Math.abs(Z))},mul:o,sub:t};function a(){var t=new b(3);return b!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function r(t,a,r){var n=new b(3);return n[0]=t,n[1]=a,n[2]=r,n}function n(t,a,r){var n=a[0],e=a[1],o=a[2],u=r[0],i=r[1],s=r[2];return t[0]=e*s-o*i,t[1]=o*u-n*s,t[2]=n*i-e*u,t}var i,s=function(t){var a=t[0],r=t[1],n=t[2];return Math.hypot(a,r,n)};i=a();function f(){var t=new b(4);return b!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function h(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],u=r*r+n*n+e*e+o*o;return 0<u&&(u=1/Math.sqrt(u)),t[0]=r*u,t[1]=n*u,t[2]=e*u,t[3]=o*u,t}var M;M=f();function l(){var t=new b(4);return b!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function v(t,a,r){r*=.5;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t}function m(t,a,r,n){var e,o,u,i,s,f=a[0],h=a[1],M=a[2],c=a[3],l=r[0],v=r[1],m=r[2],p=r[3];return(o=f*l+h*v+M*m+c*p)<0&&(o=-o,l=-l,v=-v,m=-m,p=-p),s=j<1-o?(e=Math.acos(o),u=Math.sin(e),i=Math.sin((1-n)*e)/u,Math.sin(n*e)/u):(i=1-n,n),t[0]=i*f+s*l,t[1]=i*h+s*v,t[2]=i*M+s*m,t[3]=i*c+s*p,t}function p(t,a){var r,n=a[0]+a[4]+a[8];if(0<n)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,u=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*u+u]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+u]-a[3*u+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[u]=(a[3*u+e]+a[3*e+u])*r}return t}var y,x,g,F,A,q,S=h;y=a(),x=r(1,0,0),g=r(0,1,0),F=l(),A=l(),q=function(){var t=new b(9);return b!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();R=function(){var t=new b(2);return b!=Float32Array&&(t[0]=0,t[1]=0),t}();var R,E=['"',"'",'\\"',"\\'"];function T(t,a,r,n){for(var e=r;e<n;++e){var o=a[e].trim();if(o===t)return e;var u=e;if("("===o?u=T(")",a,e+1,n):-1<E.indexOf(o)&&(u=T(o,a,e+1,n)),-1===u)break;e=u}return-1}function D(t,a){for(var r=new RegExp("(\\s*"+(a||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),n=t.split(r).filter(Boolean),e=n.length,o=[],u=[],i=0;i<e;++i){var s=n[i].trim(),f=i;if("("===s)f=T(")",n,i+1,e);else{if(")"===s)throw new Error("invalid format");if(-1<E.indexOf(s))f=T(s,n,i+1,e);else if(s===a){u.length&&(o.push(u.join("")),u=[]);continue}}-1===f&&(f=e-1),u.push(n.slice(i,f+1).join("")),i=f}return u.length&&o.push(u.join("")),o}function I(t){return D(t,",")}function P(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Z(t){return X(Y(t))}function X(t){var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var a=t.functionName,r=t.functionValue;a&&u[a](n,n,r)}),n}function Y(t){return(function(t){return Array.isArray(t)}(t)?t:function(t){return D(t,"")}(t)).map(function(t){var a=function(t){var a=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!a||a.length<4?{}:{prefix:a[1],value:a[2],suffix:a[3]}}(t),r=a.prefix,n=a.value,e="",o="";if("translate"===r||"translateX"===r||"translate3d"===r){var u=I(n).map(function(t){return parseFloat(t)}),i=u[0],s=u[1],f=void 0===s?0:s,h=u[2];e="translate",o=[i,f,void 0===h?0:h]}else if("translateY"===r){e="translate",o=[0,f=parseFloat(n),0]}else if("translateZ"===r){e="translate",o=[0,0,parseFloat(n)]}else if("scale"===r||"scale3d"===r){var M=I(n).map(function(t){return parseFloat(t)}),c=M[0],l=M[1],v=void 0===l?c:l,m=M[2];e="scale",o=[c,v,void 0===m?1:m]}else if("scaleX"===r){e="scale",o=[c=parseFloat(n),1,1]}else if("scaleY"===r){e="scale",o=[1,v=parseFloat(n),1]}else if("scaleZ"===r){e="scale",o=[1,1,parseFloat(n)]}else if("rotate"===r||"rotateZ"===r||"rotateX"===r||"rotateY"===r){var p=function(t){var a=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!a)return{prefix:"",unit:"",value:NaN};var r=a[1],n=a[2];return{prefix:r,unit:a[3],value:parseFloat(n)}}(n),b=p.unit,d=p.value;e="rotate"===r?"rotateZ":r,o="rad"===b?d:d*Math.PI/180}else if("matrix3d"===r)e="multiply",o=I(n).map(function(t){return parseFloat(t)});else if("matrix"===r){var y=I(n).map(function(t){return parseFloat(t)});e="multiply",o=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}return{name:r,value:n,functionName:e,functionValue:o}})}return{parse:Y,parseMat:Z,toMat:X,getDistElementMatrix:function(t,a){void 0===a&&(a=document.body);for(var r=t,n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];r;){if(o(n,Z(getComputedStyle(r).transform),n),r===a)break;r=r.parentElement}return e(n,n),n[12]=0,n[13]=0,n[14]=0,n},caculateMatrixDist:function(t,a){var r=o([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t,[a[0],a[1]||0,a[2]||0,1]),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]},getElementMatrix:function(t){return Z(getComputedStyle(t).transform)},createMatrix:P}});
//# sourceMappingURL=css-to-mat.min.js.map
